<header class="header-left">
	<div class="logo" ng-click="state = 'out'"><i class="fas fa-comment"></i></div>
	<div class="logo-name">Messenger.</div>
</header>

<header class="header-right">
	<div class="menu" ng-click="changeMobileView()"><i class="fas fa-bars"></i></div>
	<div class="conversation-name" ng-show="state === 'in'">{{currentPreview.with.userMainInfo.firstName}}
		{{currentPreview.with.userMainInfo.lastName}}
	</div>
	<div class="status" ng-show="state === 'in'">online</div>
	<div class="right">
		<div class="search"><i class="fas fa-search"></i></div>
		<div class="logout" ng-click="logout()"><i class="fas fa-sign-out-alt"></i></div>
	</div>
</header>

<div class="content-left">
	<div class="search">
		<div class="icon"><i class="fas fa-search"></i></div>
		<input id="search-conversations" type="text" placeholder="Search" ng-model="searchText"
		       ng-change="searchForConversations()">
	</div>
	<div class="preview-wrapper">
		<preview class="preview" ng-repeat="preview in conversationsOrSearch()"
		         preview="preview" date-format="dateFormat"
		         ng-class="preview.conversation.id === currentPreview.conversation.id ? 'selected' : ''"
		         ng-click="openConversation(preview)" ng-show="!isUserSearch"></preview>
		<div ng-repeat="user in searchUsers" class="user-preview" ng-click="createConversation(user)"
		     ng-show="isUserSearch">
			<img class="avatar" src="img/default-avatar.png">
			<div class="info">{{user.userMainInfo.firstName}} {{user.userMainInfo.lastName}}</div>
			<div class="login">@{{user.user.login}}</div>
		</div>
	</div>
</div>

<div class="conversation">
	<div id="no-conversation" ng-show="state === 'out'">
		{{!isSelectForwardTo ?
		'Select conversation to start messaging.' :
		'Select conversation to forward messages to.'}}
	</div>
	<div id="no-messages" ng-show="state === 'empty'">
		Be the first. Messages will be displayed here.
	</div>
	<div class="message-wrapper" ng-show="state === 'in'" scrolly="loadMore()">
		<message class="message" ng-repeat="message in messages"
		         message="message" date-format="dateFormat" is-forwarded="false"
		         ng-class="{'message-mine' : message.mine === true, 'selected' : message.selected === true}"
		         ng-click="selectMessage(message)">
		</message>
	</div>
	<div class="attachment-wrapper">
		<forwarded-attachment
				ng-show="editingMessage &&
					editingMessage.forwarded.length !== 0" forwarded="editingMessage.forwarded">
		</forwarded-attachment>
	</div>
	<div class="send-message-wrapper"
	     ng-show="(state === 'in' || state === 'empty') && selectedMessages.length === 0">
		<i class="fas fa-paperclip" ng-show="!editingMessage" show-att></i>
		<i class="fas fa-ban" ng-show="editingMessage" ng-click="cancelEditing()"></i>
		<div class="attachments-menu" show-att ng-show="showAttachmentsMenu === true">
			<div class="button"><i class="fas fa-camera"></i></div>
			<div class="button"><i class="fas fa-video"></i></div>
			<div class="button"><i class="fas fa-file"></i></div>
		</div>
		<textarea autofocus id="send-message-text" ng-model="messageText" onkeydown="resize(this)" rows="1"
		          ng-keyup="enterMessage($event)" placeholder="Write a message..."></textarea>
		<div class="emoji">
			<i class="fas fa-smile"></i>
		</div>
		<div ng-click="sendMessage()" class="send-message">
			<i ng-show="!isEditMessageView" class="fas fa-angle-right"></i>
			<i ng-show="isEditMessageView" class="fas fa-angle-up"></i>
		</div>
	</div>
	<div class="selected-messages-menu" ng-show="selectedMessages.length !== 0">
		<div class="button" ng-click="deleteSelectedMessages()"><i class="fas fa-trash"></i></div>
		<div class="button" ng-click="replySelectedMessage()"><i class="fas fa-reply"></i></div>
		<div class="button" ng-click="forwardSelectedMessages()"><i class="fas fa-arrow-right"></i></div>
		<div class="button" ng-show="selectedMessages.length === 1 && selectedMessages[0].mine"
		     ng-click="editSelectedMessage()"><i class="fas fa-pen"></i></div>
		<div class="right">
			<div class="text-button" ng-click="clearSelectedMessages()">Cancel</div>
		</div>
	</div>
</div>